# è®¾ç½®åŠŸèƒ½é‡æ„æ€»ç»“

## ğŸ¯ é‡æ„ç›®æ ‡

é‡æ„ç”¨æˆ·è®¾ç½®åŠŸèƒ½ï¼ŒåŒ…æ‹¬åŸºç¡€è®¾ç½®å’Œè´¦æˆ·ç™»å½•åŠŸèƒ½ï¼Œæä¾›ç°ä»£åŒ–çš„ç”¨æˆ·ä½“éªŒã€‚

## âœ¨ ä¸»è¦æ”¹è¿›

### 1. æ¶æ„å‡çº§

- **ç»Ÿä¸€æ•°æ®ç®¡ç†**: åˆ›å»ºäº† `useUserProfile` é’©å­ï¼Œé›†ä¸­ç®¡ç†ç”¨æˆ·é…ç½®æ–‡ä»¶ã€è®¾ç½®å’Œè®¤è¯çŠ¶æ€
- **BackgroundæœåŠ¡åŒ–**: é€šè¿‡ `user-profile-action.ts` å®ç°å®Œæ•´çš„ç”¨æˆ·æ•°æ®æœåŠ¡ä¸­é—´å±‚
- **React Queryé›†æˆ**: ä½¿ç”¨ç°ä»£åŒ–çš„æ•°æ®è·å–å’Œç¼“å­˜ç­–ç•¥

### 2. ç”¨æˆ·ç•Œé¢é‡æ„

- **ç°ä»£åŒ–å¸ƒå±€**: é‡‡ç”¨å¡ç‰‡å¼è®¾è®¡ï¼Œæ¸…æ™°çš„åˆ†ç»„å’Œå±‚æ¬¡ç»“æ„
- **å“åº”å¼è®¾è®¡**: å…¨é¢ä½¿ç”¨ Tailwind CSSï¼Œç¡®ä¿åœ¨ä¸åŒå±å¹•å°ºå¯¸ä¸‹çš„è‰¯å¥½ä½“éªŒ
- **å®æ—¶çŠ¶æ€åé¦ˆ**: åŠ è½½ã€æˆåŠŸã€é”™è¯¯çŠ¶æ€çš„æ¸…æ™°å±•ç¤º

### 3. è´¦æˆ·åŠŸèƒ½å®Œå–„

- **ç™»å½•/æ³¨å†Œ**: å†…ç½®çš„è®¤è¯è¡¨å•ï¼Œæ”¯æŒè´¦æˆ·åˆ‡æ¢
- **ç”¨æˆ·ä¿¡æ¯å±•ç¤º**: å¤´åƒã€ç”¨æˆ·åã€é‚®ç®±çš„æ¸…æ™°å±•ç¤º
- **äº‘ç«¯åŒæ­¥**: ä¸€é”®åŒæ­¥é…ç½®æ–‡ä»¶åˆ°äº‘ç«¯
- **å®‰å…¨ç™»å‡º**: æ¸…ç†æœ¬åœ°è®¤è¯æ•°æ®

### 4. è®¾ç½®ç®¡ç†ä¼˜åŒ–

- **ä¸»é¢˜é€‰æ‹©**: å¯è§†åŒ–çš„ä¸»é¢˜é¢œè‰²é€‰æ‹©å™¨
- **å¤šè¯­è¨€æ”¯æŒ**: æ”¯æŒ6ç§è¯­è¨€ï¼ˆä¸­æ–‡ç®€ç¹ä½“ã€è‹±æ–‡ã€æ—¥æ–‡ã€éŸ©æ–‡ã€ä¿„æ–‡ï¼‰
- **å­—ä½“å¤§å°**: ä¸‰æ¡£å­—ä½“å¤§å°é€‰æ‹©
- **é«˜çº§è®¾ç½®**: é”®ç›˜å¿«æ·é”®ã€é¢„è§ˆåŠŸèƒ½ç­‰é«˜çº§é€‰é¡¹

## ğŸ—ï¸ æ–°å¢ç»„ä»¶å’Œé’©å­

### æ ¸å¿ƒé’©å­

```typescript
// ç»Ÿä¸€çš„ç”¨æˆ·é…ç½®æ–‡ä»¶é’©å­
useUserProfile() {
  profile,      // å®Œæ•´ç”¨æˆ·é…ç½®æ–‡ä»¶
  user,         // ç”¨æˆ·ä¿¡æ¯
  settings,     // ç”¨æˆ·è®¾ç½®
  authStatus,   // è®¤è¯çŠ¶æ€
  isLoggedIn,   // ç™»å½•çŠ¶æ€
  updateSettings, // æ›´æ–°è®¾ç½®
  login,        // ç™»å½•
  register,     // æ³¨å†Œ
  logout,       // ç™»å‡º
  syncProfile,  // åŒæ­¥é…ç½®æ–‡ä»¶
  refetch       // åˆ·æ–°æ•°æ®
}

// ç®€åŒ–çš„è®¾ç½®é’©å­
useUserSettings() {
  settings,
  updateSettings,
  isUpdating
}

// è®¤è¯çŠ¶æ€é’©å­
useAuthStatus() {
  authStatus,
  user,
  isLoggedIn,
  login,
  register,
  logout
}
```

### BackgroundæœåŠ¡

```typescript
// background/messages/user-profile-action.ts
- getUserProfile: è·å–å®Œæ•´é…ç½®æ–‡ä»¶
- updateUserSettings: æ›´æ–°ç”¨æˆ·è®¾ç½®
- login/register/logout: ç”¨æˆ·è®¤è¯
- syncProfile: å¼ºåˆ¶åŒæ­¥
- clearCache: æ¸…ç†ç¼“å­˜
```

## ğŸ¨ UI/UX æ”¹è¿›

### è§†è§‰è®¾è®¡

- **Glass Designé£æ ¼**: ç°ä»£åŒ–çš„æ¯›ç»ç’ƒæ•ˆæœè®¾è®¡è¯­è¨€
- **ä¸€è‡´çš„é—´è·**: ç»Ÿä¸€çš„paddingå’Œmarginä½¿ç”¨
- **é¢œè‰²ä½“ç³»**: åŸºäºä¸»é¢˜çš„é¢œè‰²åº”ç”¨
- **å›¾æ ‡ç³»ç»Ÿ**: ç»Ÿä¸€ä½¿ç”¨Lucide Reactå›¾æ ‡

### äº¤äº’ä½“éªŒ

- **å³æ—¶åé¦ˆ**: è®¾ç½®æ›´æ”¹ç«‹å³ç”Ÿæ•ˆå¹¶æ˜¾ç¤ºçŠ¶æ€
- **é”™è¯¯å¤„ç†**: å®Œå–„çš„é”™è¯¯è¾¹ç•Œå’Œé”™è¯¯æç¤º
- **åŠ è½½çŠ¶æ€**: ä¼˜é›…çš„éª¨æ¶å±å’ŒåŠ è½½åŠ¨ç”»
- **è¡¨å•éªŒè¯**: å®æ—¶çš„è¡¨å•éªŒè¯å’Œæç¤º

### åŠŸèƒ½ç‰¹æ€§

- **å¯†ç å¯è§æ€§åˆ‡æ¢**: æ”¯æŒå¯†ç æ˜¾ç¤º/éšè—
- **ç™»å½•æ³¨å†Œåˆ‡æ¢**: æ— ç¼çš„æ¨¡å¼åˆ‡æ¢
- **åŒæ­¥çŠ¶æ€æŒ‡ç¤º**: æ¸…æ™°çš„äº‘ç«¯è¿æ¥çŠ¶æ€
- **è®¾ç½®å†å²**: æ˜¾ç¤ºæœ€åæ›´æ–°å’ŒåŒæ­¥æ—¶é—´

## ğŸ”§ æŠ€æœ¯å®ç°

### æ•°æ®æµæ¶æ„

```
UIç»„ä»¶ â† useUserProfile â† React Query â† Background Messages â† Chrome Storage/Cloud API
```

### ç¼“å­˜ç­–ç•¥

- **5åˆ†é’Ÿç¼“å­˜**: ç”¨æˆ·é…ç½®æ–‡ä»¶æ•°æ®ç¼“å­˜æ—¶é—´
- **æ™ºèƒ½åŒæ­¥**: åªåœ¨æ•°æ®è¿‡æœŸæ—¶ä»äº‘ç«¯è·å–
- **ç¦»çº¿æ”¯æŒ**: æœ¬åœ°Chrome Storageä½œä¸ºåå¤‡

### é”™è¯¯å¤„ç†

- **åˆ†å±‚é”™è¯¯å¤„ç†**: Componentçº§åˆ«çš„é”™è¯¯è¾¹ç•Œ
- **ç”¨æˆ·å‹å¥½æç¤º**: Toastæ¶ˆæ¯ç³»ç»Ÿ
- **é™çº§å¤„ç†**: APIå¤±è´¥æ—¶ä½¿ç”¨æœ¬åœ°æ•°æ®

## ğŸ“± åŠŸèƒ½æˆªå›¾åŒºåŸŸ

### è´¦æˆ·éƒ¨åˆ†

- **å·²ç™»å½•çŠ¶æ€**: ç”¨æˆ·å¤´åƒã€ä¿¡æ¯å±•ç¤ºã€åŒæ­¥å’Œç™»å‡ºæŒ‰é’®
- **æœªç™»å½•çŠ¶æ€**: ç™»å½•/æ³¨å†Œè¡¨å•ï¼Œæ”¯æŒå¯†ç å¯è§æ€§åˆ‡æ¢

### å¤–è§‚è®¾ç½®

- **ä¸»é¢˜é€‰æ‹©**: 5ç§ä¸»é¢˜é¢œè‰²çš„å¯è§†åŒ–é€‰æ‹©å™¨
- **è¯­è¨€è®¾ç½®**: ä¸‹æ‹‰èœå•é€‰æ‹©ç•Œé¢è¯­è¨€
- **å­—ä½“å¤§å°**: ä¸‰ä¸ªæ¡£æ¬¡çš„å­—ä½“å¤§å°é€‰æ‹©

### é«˜çº§è®¾ç½®

- **åŠŸèƒ½å¼€å…³**: é”®ç›˜å¿«æ·é”®ã€æ ‡ç­¾é¡µé¢„è§ˆç­‰åŠŸèƒ½çš„å¼€å…³
- **äº‘ç«¯åŒæ­¥**: ç™»å½•çŠ¶æ€ä¸‹è‡ªåŠ¨å¯ç”¨äº‘ç«¯åŒæ­¥

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### åŸºç¡€ä½¿ç”¨

```typescript
import { useUserProfile } from '~source/shared/hooks'

function MyComponent() {
  const { 
    settings, 
    updateSettings, 
    isLoggedIn, 
    login 
  } = useUserProfile()
  
  const handleThemeChange = (theme) => {
    updateSettings.mutate({ theme })
  }
  
  return (
    // ä½ çš„ç»„ä»¶JSX
  )
}
```

### è®¤è¯ä½¿ç”¨

```typescript
const { login, register, logout, isLoggedIn } = useUserProfile()

// ç™»å½•
login.mutate({ email: 'user@example.com', password: 'password' })

// æ³¨å†Œ
register.mutate({ 
  email: 'user@example.com', 
  password: 'password',
  name: 'User Name'
})

// ç™»å‡º
logout.mutate()
```

## ğŸ”„ å…¼å®¹æ€§

### å‘åå…¼å®¹

- ä¿æŒäº†ç°æœ‰çš„ `useSuspenseUserSettings` å’Œ `useUpdateUserSettings` é’©å­
- ç°æœ‰ç»„ä»¶æ— éœ€ä¿®æ”¹å³å¯ç»§ç»­å·¥ä½œ
- æ•°æ®ç»“æ„ä¿æŒå…¼å®¹

### è¿ç§»å»ºè®®

- æ–°ç»„ä»¶å»ºè®®ä½¿ç”¨ `useUserProfile` é’©å­
- ç°æœ‰ç»„ä»¶å¯ä»¥æ¸è¿›å¼è¿ç§»
- è€çš„é’©å­ä¼šç»§ç»­ç»´æŠ¤ï¼Œç›´åˆ°å®Œå…¨è¿ç§»

## ğŸ¯ åç»­ä¼˜åŒ–

### è®¡åˆ’ä¸­çš„åŠŸèƒ½

- [ ] å¤´åƒä¸Šä¼ åŠŸèƒ½
- [ ] æ›´å¤šä¸»é¢˜é€‰é¡¹
- [ ] æ·±è‰²æ¨¡å¼æ”¯æŒ
- [ ] è®¾ç½®å¯¼å…¥/å¯¼å‡º
- [ ] å¤šè®¾å¤‡åŒæ­¥çŠ¶æ€æ˜¾ç¤º

### æ€§èƒ½ä¼˜åŒ–

- [ ] è®¾ç½®æ›´æ”¹çš„é˜²æŠ–å¤„ç†
- [ ] å¤§å‹è®¾ç½®é¡µé¢çš„è™šæ‹Ÿæ»šåŠ¨
- [ ] æ›´ç²¾ç»†çš„ç¼“å­˜ç­–ç•¥

è¿™æ¬¡é‡æ„å¤§å¤§æå‡äº†è®¾ç½®åŠŸèƒ½çš„ç”¨æˆ·ä½“éªŒå’Œä»£ç ç»´æŠ¤æ€§ï¼Œä¸ºåç»­åŠŸèƒ½æ‰©å±•å¥ å®šäº†è‰¯å¥½çš„åŸºç¡€ã€‚
